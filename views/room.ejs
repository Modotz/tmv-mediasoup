<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="icon" type="image/png" href="/favicon.pnghttps://192.168.18.68:3001/user/656e908441280681a8a7cb4a">
    <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.7.570/build/pdf.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <!-- Include dompurify from a CDN -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@2.3.4/dist/purify.js"></script>


    <!-- <script src="https://www.jsdelivr.com/package/npm/pdfjs-dist"></script> -->
    <title>Telepati</title>
    <style>
        /* Root Container */
        * {
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 1vw;
        }

        ::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 0.5rem rgba(0, 0, 0, 0.3);
            background-color: #F5F5F5;
        }

        ::-webkit-scrollbar {
            width: 0px;
            background-color: #F5F5F5;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #000000;
        }

        #full-container {
            height: 100vh;
            width: 100vw;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            background-color: #1e1f20;
            overflow: hidden;
            position: relative;
        }

        /* Upper Container */

        #upper-container {
            width: 100%;
            height: 90%;
            /* background-color: green; */
            position: relative;
            display: flex;
        }

        #users-list-container {
            position: absolute;
            padding: 10px;
            width: 39%;
            height: 100%;
            top: 0%;
            right: -100%;
            background-color: white;
            z-index: 2;
            transition: 1s;
        }

        #users-list-container>.user-list {
            width: 100%;
            display: flex;
            padding: 5px;
            justify-content: space-between;
        }

        #users-list-container>.user-list>.user-list-left-section,
        #users-list-container>.user-list>.user-list-right-section {
            display: flex;
            align-items: center;
            height: 25px;
            width: 50%;
        }

        .user-list-right-section {
            justify-content: end;
        }

        #users-list-container>.user-list>.user-list-left-section>.user-list-picture {
            border-radius: 50%;
            margin-right: 3px;
            height: 100%;
            aspect-ratio: 1/1;
        }

        #users-list-container>.user-list>.user-list-right-section>div {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            background-color: #44474A;
            border-radius: 50%;
            aspect-ratio: 1/1;
        }

        #users-list-container>.user-list>.user-list-right-section>.kick-icon {
            background-color: #ffffff00;
            cursor: pointer;
        }

        /* Video Container */

        #video-container {
            padding: 10px;
            /* min-width: 40%;
            max-width: 40%; */
            width: 40%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            align-content: center;
            flex-wrap: wrap;
            overflow-y: auto;
            z-index: 1;
            transition: 1s;
            /* background-color: red; */
        }

        .user-video {
            width: 100%;
            max-height: 100%;
            transform: rotateY(180deg);
            -webkit-transform: rotateY(180deg);
            -moz-transform: rotateY(180deg);
            position: relative;
        }

        .user-video-container-1 {
            display: flex;
            justify-content: center;
            background-color: black;
            height: 20%;
            width: 25%;
            position: relative;
            transition: 1s;
            margin: 10px;
        }

        .icons-mic {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 2px;
            right: 2px;
            width: 15px;
            height: 15px;
            border-radius: 30px;
            transition: 0.3s;
            background: #1e1f20;
            z-index: 5;
        }

        .mic-image {
            width: 8px;
            height: 8px;
        }

        .audio-visualizer {
            position: absolute;
            background-color: #33333300;
            width: 15px;
            height: 15px;
            right: 2px;
            top: 2px;
            border-radius: 50%;
            z-index: 4;
        }

        .username {
            border-radius: 4px;
            position: absolute;
            bottom: 0px;
            left: 0px;
            color: white;
            font-size: 11px;
            background: rgba(0, 0, 0, 0.4);
            padding: 4px;
            z-index: 4;
        }

        .signature {
            position: absolute;
            top: 0;
            left: 0;
            padding: 5px;
            font-size: 7px;
            background-color: white;
        }

        /* Main Content */

        #side-bar-container {
            width: 60%;
            height: 100%;
            top: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            background-color: #fff;
            overflow: hidden;
            padding: 1vw;
            position: relative;
        }

        #raise-hand-queue {
            position: absolute;
            display: flex;
            flex-direction: column-reverse;
            left: 0;
            bottom: 0;
        }

        #raise-hand-queue>div>* {
            margin: 5px;
        }

        .raise-hand-queues {
            display: flex;
            align-items: center;
            /* flex-direction: column; */
            border-radius: 20px;
            background: white;
            margin: 5px;
        }

        .raise-hand-queue-username {
            background-color: rgba(255, 255, 255, 0.4);
            border-radius: 5px;
            padding: 2px;
        }

        /* Main Content -> Tata Tertib Section*/

        #tata-tertib {
            /* font-size: 1rem; */
            padding: 1em;
            width: 100%;
            height: 100%;
        }

        #template-room {
            width: 100%;
            padding: 10px;
            /* Optional: Add padding to the content */
        }

        #template-room>p>img {
            max-width: 100%;
        }

        /* Main Content -> PDF Section*/

        #pdf-container {
            height: 90%;
            width: 100%;
            display: flex;
            justify-content: center;
            overflow-y: hidden;
            flex-wrap: wrap;
        }

        #pdf-document {
            width: 100%;
            height: 100%;
        }

        #pdf-controller {
            width: 100%;
            height: 10%;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: baseline;
            flex-wrap: wrap;
            overflow-y: auto;
            box-sizing: content-box;
        }

        #pdf-canvas {
            width: 100%;
            height: 150%;
        }

        /* Bottom Container */

        #bottom-container {
            width: 100%;
            height: 10%;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            position: relative;
        }

        #left-section,
        #right-section {
            display: flex;
            align-items: center;
        }

        #right-section>button,
        #left-section>button {
            margin: 3px;
        }

        .button-small-custom {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            /* width: 40px; */
            height: 40px;
            border-radius: 50%;
            transition: 0.3s;
            background: #44474A;
            margin-left: 10px;
            margin-right: 10px;
        }

        .button-small-custom:hover {
            background-color: #959ca3;
        }

        .button-small-custom-red {
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            /* width: 40px; */
            height: 40px;
            border-radius: 50%;
            transition: 0.3s;
            background: #c71010;
            margin-left: 10px;
            margin-right: 10px;
        }

        .button-small-custom-red:hover {
            background-color: #ff0000;
        }

        #bottom-container>div {
            height: 100%;
        }

        /* Bottom Container -> Left Section */

        #bottom-container>#left-section>button {
            height: 50%;
        }

        #user-record-button {
            position: relative;
        }

        #user-record-button:hover>#user-record-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #user-record-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
        }

        /* Bottom Container -> Right Section */

        #bottom-container>#right-section>button {
            height: 50%;
            aspect-ratio: 1/1;
        }

        #user-mic-button {
            position: relative;
        }

        #user-mic-button:hover>#user-mic-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #user-mic-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
        }

        #mute-all-button {
            position: relative;
        }

        #mute-all-button:hover>#mute-all-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #mute-all-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
        }

        #raise-hand-button {
            position: relative;
        }

        #raise-hand-button:hover>#raise-hand-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #raise-hand-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
        }

        #end-button {
            position: relative;
        }

        #end-button:hover>#end-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #end-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
        }

        #display-video-button {
            display: none;
            position: relative;
        }

        #display-video-button:hover>#display-video-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #display-video-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
            left: -100%;
        }

        #users-list-button {
            position: relative;
        }

        #users-list-button:hover>#users-list-button-tooltip {
            visibility: visible;
            z-index: 3;
        }

        #users-list-button-tooltip {
            background-color: #bbbbbba1;
            white-space: nowrap;
            border-radius: 10px;
            padding: 10px;
            position: absolute;
            visibility: hidden;
            top: -100%;
        }

        /* Miscellaneous Section */

        .unlock-scroll {
            overflow-y: auto !important;
        }

        .hide-event {
            display: none !important;
        }

        .video-off {
            z-index: 3;
            width: 100%;
            height: 100%;
            position: absolute;
            background-color: #000000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .video-on {
            width: 100%;
            z-index: 0;
            position: absolute;
            background-color: #000000;
            display: none;
        }

        .image-turn-off {
            width: 25%;
            height: 25%;
            border-radius: 50%;
        }

        .record-timer {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            top: 10px;
            left: 10px;
            background-color: rgba(239, 235, 235, 0.541);
            border-radius: 10px;
            font-size: 12px;
            padding: 10px;
        }

        #alert-error {
            visibility: hidden;
            color: #fff;
            background-color: #333;
            margin-left: -125px;
            border-radius: 10px;
            padding: 10px;
            text-align: center;
            top: 30px;
            left: 50%;
            z-index: 4;
            position: absolute;
        }

        #alert-error.show {
            visibility: visible;
            -webkit-animation: fadein-as 0.5s, fadeout-as 0.5s 2.5s;
            animation: fadein-as 0.5s, fadeout-as 0.5s 2.5s;
        }

        .modal-custom-align,
        #sign-password-label {
            text-align: center !important;
            width: 100%;
        }

        .modal-header-custom {
            width: 100%;
        }

        /* Responsive Section */

        @media (max-width: 850px) {
            /* Upper Container */

            #users-list-container {
                width: 100%;
                font-size: 15px;
            }

            /* Main Content */

            #side-bar-container {
                width: 100%;
                position: relative;
            }

            #pdf-controller,
            #pdf-controller>button {
                font-size: 3rem;
            }

            #raise-hand-queue {
                font-size: 15px;
            }

            /* Main Content -> Tata Tertib Section */

            #tata-tertib {
                font-size: 12px;
            }

            #tata-tertib>h3 {
                font-size: 20px;
            }

            /* Video Container */

            #video-container {
                /* width: 0%;
                transition: 1s; */
                /* display: none; */
                position: absolute;
                right: -100%;
                height: 100%;
                width: 100%;
                background-color: black;
                transition: 1s;
            }

            /* Bottom Container */

            #bottom-container>div>button {
                font-size: 15px;
            }

            /* Bottom Container > Right Section*/

            #display-video-button {
                display: block !important;
            }

            /* Miscellaneous Section */

            .modal-content {
                height: 30%;
            }
        }
    </style>
</head>

<body>
    <div id="full-container">
        <div class="modal fade" id="sign-password" tabindex="-1" role="dialog" aria-labelledby="sign-password-label"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content modal-custom-align">
                    <div class="modal-header modal-header-custom">
                        <h5 class="modal-title" id="sign-password-label">Sign Document</h5>
                    </div>
                    <div class="modal-body">
                        <!-- <form id="sign-document"> -->
                            <div class="form-group">
                                <label for="recipient-name" class="col-form-label">Password</label>
                                <input type="password" class="form-control" id="sign-document-password">
                                <br />
                                <button id="close-sign-button" class="btn btn-danger">Cancel</button>
                                <button id="confirm-sign-button" class="btn btn-primary">Sign Document</button>
                            </div>
                        <!-- </form> -->
                    </div>
                </div>
            </div>
        </div>
        <span id="alert-error"></span>
        <section id="upper-container">
            <div id="audio-collection"></div>
            <div id="side-bar-container">
                <section id="tata-tertib">
                    <h3> Berikut adalah beberapa tata tertib dalam mengikuti meeting online transaksi jual beli:
                    </h3>
                    <ol>
                        <li>
                            <p>Seluruh peserta transaksi dalam keadaan sehat jasmani dan rohani.</p>
                        </li>
                        <li>
                            <p>Seluruh peserta sedang tidak dalam suatu ancaman atau paksaan dari pihak manapun.
                            </p>
                        </li>
                        <li>
                            <p>Pastikan untuk masuk ke virtual meeting tepat pada waktu yang ditentukan.</p>
                        </li>
                        <li>
                            <p>Pastikan untuk menggunakan perangkat yang memadai, seperti komputer atau laptop
                                dengan koneksi internet yang stabil.</p>
                        </li>
                        <li>
                            <p>Non-aktifkan suara dan microphone Anda ketika tidak sedang berbicara agar tidak
                                mengganggu pertemuan.
                            </p>
                        </li>
                        <li>
                            <p>Gunakan kamera untuk memastikan bahwa pemimpin rapat dapat melihat Anda dan
                                mengevaluasi partisipasi Anda.</p>
                        </li>
                        <li>
                            <p>Fokuslah pada rapat dan hindari melakukan kegiatan lain seperti membuka email
                                atau menjelajahi internet.</p>
                        </li>
                        <li>
                            <p>Berpartisipasilah aktif dalam diskusi dan memberikan masukan yang berguna.</p>
                        </li>
                        <li>
                            <p>Durasi transaksi hanya 45 menit, jika transaksi belum selesai harus diulang
                                kembali.</p>
                        </li>
                        <li>
                            <p>Gunakan fitur chat untuk mengirimkan pertanyaan atau komentar secara real-time.
                            </p>
                        </li>
                    </ol>
                    <p>Dengan mengikuti tata tertib ini, Anda dapat memastikan bahwa meeting online berjalan
                        dengan lancar dan produktif.</p>
                    <br>
                    <div id="template-room"></div>
                </section>
                <section id="pdf-document" class="hide-event">
                    <div id="pdf-controller">
                        <p>Page : <span id="current-page"></span> / <span id="total-page"></span></p>
                    </div>
                    <div id="pdf-container">
                    </div>
                </section>
            </div>
            <section id="raise-hand-queue">
            </section>
            <div id="video-container">
            </div>
            <div id="users-list-container">
            </div>
        </section>
        <section id="bottom-container">
            <div id="left-section">
            </div>
            <div id="right-section">
                <button class="btn button-small-custom" id="user-mic-button">
                    <span id="user-mic-button-tooltip">Microphone</span>
                    <i class="fas fa-microphone" style="color: #ffffff;" id="turn-on-off-mic-icons"></i>
                </button>
                <button class="btn button-small-custom" id="display-video-button">
                    <span id="display-video-button-tooltip">Participants</span>
                    <i class="fas fa-tv" style="color: #ffffff;" id="display-users-icons"></i>
                </button>
                <button class="btn button-small-custom" id="raise-hand-button">
                    <span id="raise-hand-button-tooltip">Raise Hand</span>
                    <i class="fas fa-hand-paper" style="color: #ffc400;" id="display-users-icons"></i>
                </button>
                <button class="btn button-small-custom" id="users-list-button">
                    <span id="users-list-button-tooltip">Users List</span>
                    <i class="fas fa-users" style="color: #ffffff;"></i>
                </button>
            </div>
        </section>
    </div>
    <script>
        let participantData = `<%- JSON.stringify(participantData) %>`
        let parsedData = JSON.parse(participantData);
        let templateTataTertibData = `<%- JSON.stringify(templateTataTertib) %>`
        let templateTataTertib = templateTataTertibData.slice(1, -1)
        // let templateTataTertibImageData = `<%- JSON.stringify(templateTataTertibImage) %>`
        // let templateTataTertibImage = templateTataTertibImageData.slice(1, -1)
        // console.log(templateTataTertibJson)
        // let templateTataTertib = JSON.parse(templateTataTertibJson);
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
    <script>
        NProgress.start();
        window.onload = function () {
            NProgress.done();
        };
    </script>
    <script defer src="/javascript/room/roombundle.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</body>

</html>